{"ast":null,"code":"import _objectSpread from\"C:/Users/test/Desktop/FinalRingsStore/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{ChevronRight,ChevronLeft,Check,Heart,Star,Diamond,Circle,Square,CircleDot,ShoppingCart,Crown}from'lucide-react';import{ringOptions,basePrice}from'../data/ringOptions';import ProgressBar from'./ProgressBar';import{supabase}from'../lib/supabase';import{useCart}from'../App';import{useNavigate}from'react-router-dom';import CustomizationStep from'./CustomizationStep';// Elegant ring SVG for fallback\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const RingIcon=props=>/*#__PURE__*/_jsx(\"svg\",_objectSpread(_objectSpread({viewBox:\"0 0 64 64\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\"},props),{},{children:/*#__PURE__*/_jsxs(\"g\",{children:[/*#__PURE__*/_jsx(\"ellipse\",{cx:\"32\",cy:\"44\",rx:\"18\",ry:\"14\",stroke:\"currentColor\",strokeWidth:\"4\",fill:\"none\"}),/*#__PURE__*/_jsx(\"ellipse\",{cx:\"32\",cy:\"44\",rx:\"12\",ry:\"8\",stroke:\"currentColor\",strokeWidth:\"2\",fill:\"none\",opacity:\"0.3\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M32 30 L32 16\",stroke:\"currentColor\",strokeWidth:\"3\",strokeLinecap:\"round\"}),/*#__PURE__*/_jsx(\"polygon\",{points:\"32,8 38,16 26,16\",fill:\"currentColor\",opacity:\"0.7\"}),/*#__PURE__*/_jsx(\"polygon\",{points:\"32,2 36,8 28,8\",fill:\"currentColor\"}),/*#__PURE__*/_jsx(\"circle\",{cx:\"32\",cy:\"16\",r:\"3\",fill:\"currentColor\",opacity:\"0.5\"})]})}));const RingCustomizer=()=>{var _designs$find2,_metals$find2,_shapes$find2,_carats$find;const{addToCart}=useCart();const navigate=useNavigate();const[currentStep,setCurrentStep]=useState(1);const[selections,setSelections]=useState({metal:'',design:'',shape:'',carat:''});const[currentImage,setCurrentImage]=useState('');const[totalPrice,setTotalPrice]=useState(basePrice);const[showFloatingMessage,setShowFloatingMessage]=useState(false);const[imageError,setImageError]=useState(false);const[showSuccessMessage,setShowSuccessMessage]=useState(false);const[added,setAdded]=useState(false);// Step definitions\nconst steps=[{id:1,title:'Choose Design',icon:Heart},{id:2,title:'Choose Metal',icon:Crown},{id:3,title:'Diamond Shape',icon:Diamond},{id:4,title:'Carat Weight',icon:Star}];// Option definitions\nconst metals=[{value:'white-gold',label:'White Gold',icon:Crown},{value:'yellow-gold',label:'Yellow Gold',icon:Crown},{value:'rose-gold',label:'Rose Gold',icon:Crown},{value:'platinum',label:'Platinum',icon:Crown}];const designs=[{value:'classic-solitaire',label:'Classic Solitaire',icon:Circle},{value:'halo-setting',label:'Halo Setting',icon:CircleDot},{value:'vintage-antique',label:'Vintage/Antique',icon:Heart},{value:'three-stone',label:'Three Stone',icon:Star}];const shapes=[{value:'round',label:'Round Brilliant',icon:Circle},{value:'princess',label:'Princess Cut',icon:Square},{value:'emerald',label:'Emerald Cut',icon:Square},{value:'oval',label:'Oval Brilliant',icon:Circle}];const carats=[{value:'1.0',label:'1.0 Carat',icon:Diamond},{value:'1.5',label:'1.5 Carat',icon:Diamond},{value:'2.0',label:'2.0 Carat',icon:Diamond},{value:'2.5',label:'2.5 Carat',icon:Diamond}];const shapeOrder=['round','oval','princess','emerald'];// preferred order\nconst fetchFirstAvailableShape=async(design,metal)=>{for(const shape of shapeOrder){const imagePath=\"rings/\".concat(design,\"/\").concat(metal,\"/\").concat(shape,\"/1.0ct.png\");const{data}=supabase.storage.from('ring-images').getPublicUrl(imagePath);if(data!==null&&data!==void 0&&data.publicUrl){// Test if the image actually exists\nconst img=new window.Image();const result=await new Promise(resolve=>{img.onload=()=>resolve(true);img.onerror=()=>resolve(false);img.src=data.publicUrl;});if(result){return shape;}}}return null;};// Generate image path candidates for fallback logic\nconst generateImagePathCandidates=()=>{const{design,metal,shape}=selections;if(!design)return['rings/default/band.png'];const candidates=[];if(design&&metal&&shape)candidates.push(\"rings/\".concat(design,\"/\").concat(metal,\"/\").concat(shape,\"/1.0ct.png\"));if(design&&metal)candidates.push(\"rings/\".concat(design,\"/\").concat(metal,\"/band.png\"));if(design)candidates.push(\"rings/\".concat(design,\"/band.png\"));candidates.push('rings/default/band.png');return candidates;};// Fetch image with fallback, always show placeholder if not found\nconst fetchImage=async()=>{const candidates=generateImagePathCandidates();for(let i=0;i<candidates.length;i++){const imagePath=candidates[i];const{data}=supabase.storage.from('ring-images').getPublicUrl(imagePath);if(data!==null&&data!==void 0&&data.publicUrl){const img=new window.Image();const result=await new Promise(resolve=>{img.onload=()=>resolve(true);img.onerror=()=>resolve(false);img.src=data.publicUrl;});if(result){setCurrentImage(data.publicUrl);setImageError(false);return;}}}setCurrentImage('/placeholder-ring.png');setImageError(true);};// Update image when selections change\nuseEffect(()=>{setImageError(false);fetchImage();// eslint-disable-next-line\n},[selections]);// Calculate total price\nuseEffect(()=>{var _ringOptions$metals$f,_ringOptions$designs$,_ringOptions$shapes$f,_ringOptions$carats$f;let total=basePrice;if(selections.metal)total+=((_ringOptions$metals$f=ringOptions.metals.find(m=>m.id===selections.metal))===null||_ringOptions$metals$f===void 0?void 0:_ringOptions$metals$f.price)||0;if(selections.design)total+=((_ringOptions$designs$=ringOptions.designs.find(d=>d.id===selections.design))===null||_ringOptions$designs$===void 0?void 0:_ringOptions$designs$.price)||0;if(selections.shape)total+=((_ringOptions$shapes$f=ringOptions.shapes.find(s=>s.id===selections.shape))===null||_ringOptions$shapes$f===void 0?void 0:_ringOptions$shapes$f.price)||0;if(selections.carat)total+=((_ringOptions$carats$f=ringOptions.carats.find(c=>c.id===selections.carat))===null||_ringOptions$carats$f===void 0?void 0:_ringOptions$carats$f.price)||0;setTotalPrice(total);},[selections]);// Show encouragement message\nuseEffect(()=>{if(currentStep===4&&selections.metal&&selections.design&&selections.shape&&selections.carat&&!imageError){setShowFloatingMessage(true);const timeout=setTimeout(()=>setShowFloatingMessage(false),3000);return()=>clearTimeout(timeout);}},[currentStep,selections,imageError]);// Handle step selection, always set defaults when design is chosen\nconst handleSelection=async(step,value)=>{if(step==='design'){// When any design is chosen, always check for the default shape, fallback to first available\nlet defaultMetal='white-gold';let defaultShape='round';let defaultCarat='1.0';const availableShape=(await fetchFirstAvailableShape(value,defaultMetal))||defaultShape;setSelections({design:value,metal:defaultMetal,shape:availableShape,carat:defaultCarat});setImageError(false);return;}if(step==='metal'){// When metal is changed, also check for available shape for the new metal\nlet design=selections.design;let defaultShape='round';let defaultCarat=selections.carat||'1.0';const availableShape=(await fetchFirstAvailableShape(design,value))||defaultShape;setSelections(prev=>_objectSpread(_objectSpread({},prev),{},{metal:value,shape:availableShape,carat:defaultCarat}));setImageError(false);return;}setSelections(prev=>_objectSpread(_objectSpread({},prev),{},{[step]:value}));setImageError(false);};// Step navigation\nconst goToStep=step=>setCurrentStep(step);// Step data for rendering\nconst getCurrentStepData=()=>{switch(currentStep){case 1:return{options:designs,selected:selections.design,onSelect:v=>handleSelection('design',v)};case 2:return{options:metals,selected:selections.metal,onSelect:v=>handleSelection('metal',v)};case 3:return{options:shapes,selected:selections.shape,onSelect:v=>handleSelection('shape',v)};case 4:return{options:carats,selected:selections.carat,onSelect:v=>handleSelection('carat',v)};default:return null;}};// Progress bar status\nconst getProgressStatus=()=>steps.map((step,idx)=>{if(idx<currentStep-1){return{step:step.id,label:step.title.replace('Choose ',''),completed:true,current:false};}else if(idx===currentStep-1){return{step:step.id,label:step.title.replace('Choose ',''),completed:false,current:true};}else{return{step:step.id,label:step.title.replace('Choose ',''),completed:false,current:false};}});// Add to cart handler\nconst handleAddToCart=async()=>{if(selections.metal&&selections.design&&selections.shape&&selections.carat){var _designs$find,_metals$find,_shapes$find;// Look up the real product in ring_images\nconst{data:productData,error}=await supabase.from('ring_images').select('*').eq('design',selections.design).eq('metal',selections.metal).eq('diamond_shape',selections.shape).eq('carat',selections.carat).single();const designLabel=((_designs$find=designs.find(d=>d.value===selections.design))===null||_designs$find===void 0?void 0:_designs$find.label)||selections.design;const metalLabel=((_metals$find=metals.find(m=>m.value===selections.metal))===null||_metals$find===void 0?void 0:_metals$find.label)||selections.metal;const shapeLabel=((_shapes$find=shapes.find(s=>s.value===selections.shape))===null||_shapes$find===void 0?void 0:_shapes$find.label)||selections.shape;let ringProduct;if(!error&&productData){ringProduct={id:productData.id,name:\"\".concat(designLabel,\" Ring\"),design:selections.design,designLabel,metal:selections.metal,metalLabel,shape:selections.shape,shapeLabel,carat:selections.carat,price:totalPrice,qty:1,image:productData.public_url||productData.image_url||currentImage||'/placeholder-ring.png'};}else{// If the combination does not exist, add a custom ring with the selected carat and a placeholder image\nringProduct={id:\"custom-\".concat(Date.now()),name:\"\".concat(designLabel,\" Ring (Custom)\"),design:selections.design,designLabel,metal:selections.metal,metalLabel,shape:selections.shape,shapeLabel,carat:selections.carat,price:totalPrice,qty:1,image:currentImage||'/placeholder-ring.png',isCustom:true};}addToCart(ringProduct);setAdded(true);setTimeout(()=>setAdded(false),1000);}else{alert('Please complete all customization steps first');}};// Only allow next step if image is valid and selection is made\nconst canAdvance=!imageError&&(currentStep===1&&selections.design||currentStep===2&&selections.metal||currentStep===3&&selections.shape||currentStep===4&&selections.carat);const stepData=getCurrentStepData();return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-white flex flex-col items-center overflow-x-hidden\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-full max-w-xl px-2 sm:px-4 flex flex-col items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mt-2 mb-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center mb-1\",children:[/*#__PURE__*/_jsx(Diamond,{className:\"w-4 h-4 text-yellow-500 mr-1\"}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-base font-bold bg-gradient-to-r from-yellow-400 to-yellow-600 bg-clip-text text-transparent\",children:\"Shemesh Gold\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-600\",children:\"Start customizing your dream ring\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"w-full flex flex-col items-center mb-1 relative\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-full flex justify-center items-center\",children:currentImage&&!imageError?/*#__PURE__*/_jsx(\"img\",{src:currentImage,alt:\"Ring preview\",className:\"object-contain max-h-96 w-auto mx-auto\",style:{maxWidth:'100%'},onError:()=>setImageError(true)}):imageError?/*#__PURE__*/_jsxs(\"div\",{className:\"w-full max-h-96 flex flex-col items-center justify-center bg-red-50 rounded-lg border-2 border-dashed border-red-300 p-8\",children:[/*#__PURE__*/_jsx(RingIcon,{className:\"w-16 h-16 text-red-300 mb-4\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-red-600 mb-2\",children:\"Sorry, this ring preview is not available\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-red-500 text-center\",children:\"Please try a different combination to see your dream ring!\"})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"w-full max-h-96 flex flex-col items-center justify-center bg-gray-50 rounded-lg border-2 border-dashed border-gray-300 p-8\",children:[/*#__PURE__*/_jsx(Diamond,{className:\"w-16 h-16 text-gray-400 mb-4\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-600 mb-2\",children:\"Let's make your dream ring\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 text-center\",children:\"Start by choosing your metal type below\"})]})}),showFloatingMessage&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-0 left-0 right-0 flex justify-center pointer-events-none z-10\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-yellow-500 text-black px-3 py-2 rounded-b-lg shadow-lg text-sm font-medium animate-pulse mt-0\",children:\"You have excellent taste in jewelry \\u2728\"})}),showSuccessMessage&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-0 left-0 right-0 flex justify-center pointer-events-none z-10\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-green-500 text-white px-4 py-3 rounded-lg shadow-lg text-sm font-medium animate-bounce mt-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(Check,{className:\"w-4 h-4 mr-2\"}),\"Ring added to cart! Redirecting...\"]})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"w-full flex flex-col gap-0.5 items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-full text-[10px]\",children:/*#__PURE__*/_jsx(ProgressBar,{steps:getProgressStatus(),onStepClick:goToStep,tiny:true})}),/*#__PURE__*/_jsxs(\"div\",{className:\"w-full text-[10px] flex items-center gap-1\",children:[currentStep>1&&/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setCurrentStep(currentStep-1),className:\"flex items-center px-1 py-0.5 text-[10px] bg-gray-100 border border-gray-300 rounded hover:bg-gray-200 transition-all duration-150 mr-1\",\"aria-label\":\"Previous step\",children:[/*#__PURE__*/_jsx(ChevronLeft,{className:\"w-3 h-3 mr-0.5\"}),\" Prev\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1\",children:stepData&&stepData.options&&/*#__PURE__*/_jsx(CustomizationStep,{title:null,description:null,options:stepData.options,selected:stepData.selected,onSelect:stepData.onSelect})})]}),currentStep<4&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>canAdvance&&setCurrentStep(currentStep+1),disabled:!canAdvance,className:\"mt-1 px-3 py-1 rounded bg-yellow-500 text-black text-xs font-semibold shadow \".concat(!canAdvance?'opacity-50 cursor-not-allowed':'hover:bg-yellow-600'),children:\"Next\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"w-full text-[10px]\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-0.5\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between text-[10px]\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(Heart,{className:\"w-2.5 h-2.5 mr-1 text-rose-500\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Design:\"})]}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium text-gray-900\",children:selections.design?(_designs$find2=designs.find(d=>d.value===selections.design))===null||_designs$find2===void 0?void 0:_designs$find2.label:'Not selected'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between text-[10px]\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(Crown,{className:\"w-2.5 h-2.5 mr-1 text-yellow-500\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Metal:\"})]}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium text-gray-900\",children:selections.metal?(_metals$find2=metals.find(m=>m.value===selections.metal))===null||_metals$find2===void 0?void 0:_metals$find2.label:'Not selected'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between text-[10px]\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(Diamond,{className:\"w-2.5 h-2.5 mr-1 text-blue-500\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Shape:\"})]}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium text-gray-900\",children:selections.shape?(_shapes$find2=shapes.find(s=>s.value===selections.shape))===null||_shapes$find2===void 0?void 0:_shapes$find2.label:'Not selected'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between text-[10px]\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(Star,{className:\"w-2.5 h-2.5 mr-1 text-yellow-500\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Carat:\"})]}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium text-gray-900\",children:selections.carat?(_carats$find=carats.find(c=>c.value===selections.carat))===null||_carats$find===void 0?void 0:_carats$find.label:'Not selected'})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"w-full mt-0.5\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:handleAddToCart,disabled:!(selections.metal&&selections.design&&selections.shape&&selections.carat),className:\"w-full flex items-center justify-center py-0.5 text-[10px] bg-gradient-to-r from-yellow-500 to-yellow-600 text-black rounded-md hover:from-yellow-400 hover:to-yellow-500 disabled:from-gray-300 disabled:to-gray-400 disabled:cursor-not-allowed font-semibold transition-all duration-200 shadow-md hover:shadow-lg min-h-0\",children:[/*#__PURE__*/_jsx(ShoppingCart,{className:\"w-2.5 h-2.5 mr-1\"}),/*#__PURE__*/_jsx(\"span\",{children:added?'Added!':'Add to Cart'}),/*#__PURE__*/_jsxs(\"span\",{className:\"ml-1 px-1 py-0.5 bg-black/10 rounded text-[10px] font-bold\",children:[\"$\",totalPrice.toLocaleString()]})]}),!(selections.metal&&selections.design&&selections.shape&&selections.carat)&&/*#__PURE__*/_jsx(\"p\",{className:\"text-[10px] text-gray-500 mt-0.5 text-center\",children:\"Complete all steps to add to cart\"}),selections.metal&&selections.design&&selections.shape&&selections.carat&&/*#__PURE__*/_jsx(\"div\",{className:\"text-center mt-1\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-[10px] text-yellow-600 font-medium\",children:\"\\u2728 Perfect choice! Your dream ring is ready \\u2728\"})})]})]})]})]})});};export default RingCustomizer;","map":{"version":3,"names":["React","useState","useEffect","ChevronRight","ChevronLeft","Check","Heart","Star","Diamond","Circle","Square","CircleDot","ShoppingCart","Crown","ringOptions","basePrice","ProgressBar","supabase","useCart","useNavigate","CustomizationStep","jsx","_jsx","jsxs","_jsxs","RingIcon","props","_objectSpread","viewBox","fill","xmlns","children","cx","cy","rx","ry","stroke","strokeWidth","opacity","d","strokeLinecap","points","r","RingCustomizer","_designs$find2","_metals$find2","_shapes$find2","_carats$find","addToCart","navigate","currentStep","setCurrentStep","selections","setSelections","metal","design","shape","carat","currentImage","setCurrentImage","totalPrice","setTotalPrice","showFloatingMessage","setShowFloatingMessage","imageError","setImageError","showSuccessMessage","setShowSuccessMessage","added","setAdded","steps","id","title","icon","metals","value","label","designs","shapes","carats","shapeOrder","fetchFirstAvailableShape","imagePath","concat","data","storage","from","getPublicUrl","publicUrl","img","window","Image","result","Promise","resolve","onload","onerror","src","generateImagePathCandidates","candidates","push","fetchImage","i","length","_ringOptions$metals$f","_ringOptions$designs$","_ringOptions$shapes$f","_ringOptions$carats$f","total","find","m","price","s","c","timeout","setTimeout","clearTimeout","handleSelection","step","defaultMetal","defaultShape","defaultCarat","availableShape","prev","goToStep","getCurrentStepData","options","selected","onSelect","v","getProgressStatus","map","idx","replace","completed","current","handleAddToCart","_designs$find","_metals$find","_shapes$find","productData","error","select","eq","single","designLabel","metalLabel","shapeLabel","ringProduct","name","qty","image","public_url","image_url","Date","now","isCustom","alert","canAdvance","stepData","className","alt","style","maxWidth","onError","onStepClick","tiny","onClick","description","disabled","toLocaleString"],"sources":["C:/Users/test/Desktop/FinalRingsStore/client/src/components/RingCustomizer.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { \n  ChevronRight, \n  ChevronLeft, \n  Check, \n  Heart, \n  Star, \n  Diamond, \n  Circle, \n  Square, \n  CircleDot, \n  ShoppingCart, \n  Crown\n} from 'lucide-react';\nimport { ringOptions, basePrice } from '../data/ringOptions';\nimport ProgressBar from './ProgressBar';\nimport { supabase } from '../lib/supabase';\nimport { useCart } from '../App';\nimport { useNavigate } from 'react-router-dom';\nimport CustomizationStep from './CustomizationStep';\n\n// Elegant ring SVG for fallback\nconst RingIcon = (props) => (\n  <svg viewBox=\"0 0 64 64\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" {...props}>\n    <g>\n      <ellipse cx=\"32\" cy=\"44\" rx=\"18\" ry=\"14\" stroke=\"currentColor\" strokeWidth=\"4\" fill=\"none\" />\n      <ellipse cx=\"32\" cy=\"44\" rx=\"12\" ry=\"8\" stroke=\"currentColor\" strokeWidth=\"2\" fill=\"none\" opacity=\"0.3\" />\n      <path d=\"M32 30 L32 16\" stroke=\"currentColor\" strokeWidth=\"3\" strokeLinecap=\"round\" />\n      <polygon points=\"32,8 38,16 26,16\" fill=\"currentColor\" opacity=\"0.7\" />\n      <polygon points=\"32,2 36,8 28,8\" fill=\"currentColor\" />\n      <circle cx=\"32\" cy=\"16\" r=\"3\" fill=\"currentColor\" opacity=\"0.5\" />\n    </g>\n  </svg>\n);\n\nconst RingCustomizer = () => {\n  const { addToCart } = useCart();\n  const navigate = useNavigate();\n  const [currentStep, setCurrentStep] = useState(1);\n  const [selections, setSelections] = useState({ metal: '', design: '', shape: '', carat: '' });\n  const [currentImage, setCurrentImage] = useState('');\n  const [totalPrice, setTotalPrice] = useState(basePrice);\n  const [showFloatingMessage, setShowFloatingMessage] = useState(false);\n  const [imageError, setImageError] = useState(false);\n  const [showSuccessMessage, setShowSuccessMessage] = useState(false);\n  const [added, setAdded] = useState(false);\n\n  // Step definitions\n  const steps = [\n    { id: 1, title: 'Choose Design', icon: Heart },\n    { id: 2, title: 'Choose Metal', icon: Crown },\n    { id: 3, title: 'Diamond Shape', icon: Diamond },\n    { id: 4, title: 'Carat Weight', icon: Star }\n  ];\n\n  // Option definitions\n  const metals = [\n    { value: 'white-gold', label: 'White Gold', icon: Crown },\n    { value: 'yellow-gold', label: 'Yellow Gold', icon: Crown },\n    { value: 'rose-gold', label: 'Rose Gold', icon: Crown },\n    { value: 'platinum', label: 'Platinum', icon: Crown }\n  ];\n  const designs = [\n    { value: 'classic-solitaire', label: 'Classic Solitaire', icon: Circle },\n    { value: 'halo-setting', label: 'Halo Setting', icon: CircleDot },\n    { value: 'vintage-antique', label: 'Vintage/Antique', icon: Heart },\n    { value: 'three-stone', label: 'Three Stone', icon: Star }\n  ];\n  const shapes = [\n    { value: 'round', label: 'Round Brilliant', icon: Circle },\n    { value: 'princess', label: 'Princess Cut', icon: Square },\n    { value: 'emerald', label: 'Emerald Cut', icon: Square },\n    { value: 'oval', label: 'Oval Brilliant', icon: Circle }\n  ];\n  const carats = [\n    { value: '1.0', label: '1.0 Carat', icon: Diamond },\n    { value: '1.5', label: '1.5 Carat', icon: Diamond },\n    { value: '2.0', label: '2.0 Carat', icon: Diamond },\n    { value: '2.5', label: '2.5 Carat', icon: Diamond }\n  ];\n\n  const shapeOrder = ['round', 'oval', 'princess', 'emerald']; // preferred order\n\n  const fetchFirstAvailableShape = async (design, metal) => {\n    for (const shape of shapeOrder) {\n      const imagePath = `rings/${design}/${metal}/${shape}/1.0ct.png`;\n      const { data } = supabase.storage.from('ring-images').getPublicUrl(imagePath);\n      if (data?.publicUrl) {\n        // Test if the image actually exists\n        const img = new window.Image();\n        const result = await new Promise((resolve) => {\n          img.onload = () => resolve(true);\n          img.onerror = () => resolve(false);\n          img.src = data.publicUrl;\n        });\n        if (result) {\n          return shape;\n        }\n      }\n    }\n    return null;\n  };\n\n  // Generate image path candidates for fallback logic\n  const generateImagePathCandidates = () => {\n    const { design, metal, shape } = selections;\n    if (!design) return ['rings/default/band.png'];\n    const candidates = [];\n    if (design && metal && shape) candidates.push(`rings/${design}/${metal}/${shape}/1.0ct.png`);\n    if (design && metal) candidates.push(`rings/${design}/${metal}/band.png`);\n    if (design) candidates.push(`rings/${design}/band.png`);\n    candidates.push('rings/default/band.png');\n    return candidates;\n  };\n\n  // Fetch image with fallback, always show placeholder if not found\n  const fetchImage = async () => {\n    const candidates = generateImagePathCandidates();\n    for (let i = 0; i < candidates.length; i++) {\n      const imagePath = candidates[i];\n      const { data } = supabase.storage.from('ring-images').getPublicUrl(imagePath);\n      if (data?.publicUrl) {\n        const img = new window.Image();\n        const result = await new Promise((resolve) => {\n          img.onload = () => resolve(true);\n          img.onerror = () => resolve(false);\n          img.src = data.publicUrl;\n        });\n        if (result) {\n          setCurrentImage(data.publicUrl);\n          setImageError(false);\n          return;\n        }\n      }\n    }\n    setCurrentImage('/placeholder-ring.png');\n    setImageError(true);\n  };\n\n  // Update image when selections change\n  useEffect(() => {\n    setImageError(false);\n    fetchImage();\n    // eslint-disable-next-line\n  }, [selections]);\n\n  // Calculate total price\n  useEffect(() => {\n    let total = basePrice;\n    if (selections.metal) total += ringOptions.metals.find(m => m.id === selections.metal)?.price || 0;\n    if (selections.design) total += ringOptions.designs.find(d => d.id === selections.design)?.price || 0;\n    if (selections.shape) total += ringOptions.shapes.find(s => s.id === selections.shape)?.price || 0;\n    if (selections.carat) total += ringOptions.carats.find(c => c.id === selections.carat)?.price || 0;\n    setTotalPrice(total);\n  }, [selections]);\n\n  // Show encouragement message\n  useEffect(() => {\n    if (\n      currentStep === 4 &&\n      selections.metal && selections.design && selections.shape && selections.carat &&\n      !imageError\n    ) {\n      setShowFloatingMessage(true);\n      const timeout = setTimeout(() => setShowFloatingMessage(false), 3000);\n      return () => clearTimeout(timeout);\n    }\n  }, [currentStep, selections, imageError]);\n\n  // Handle step selection, always set defaults when design is chosen\n  const handleSelection = async (step, value) => {\n    if (step === 'design') {\n      // When any design is chosen, always check for the default shape, fallback to first available\n      let defaultMetal = 'white-gold';\n      let defaultShape = 'round';\n      let defaultCarat = '1.0';\n      const availableShape = await fetchFirstAvailableShape(value, defaultMetal) || defaultShape;\n      setSelections({\n        design: value,\n        metal: defaultMetal,\n        shape: availableShape,\n        carat: defaultCarat,\n      });\n      setImageError(false);\n      return;\n    }\n    if (step === 'metal') {\n      // When metal is changed, also check for available shape for the new metal\n      let design = selections.design;\n      let defaultShape = 'round';\n      let defaultCarat = selections.carat || '1.0';\n      const availableShape = await fetchFirstAvailableShape(design, value) || defaultShape;\n      setSelections(prev => ({\n        ...prev,\n        metal: value,\n        shape: availableShape,\n        carat: defaultCarat,\n      }));\n      setImageError(false);\n      return;\n    }\n    setSelections(prev => ({ ...prev, [step]: value }));\n    setImageError(false);\n  };\n\n  // Step navigation\n  const goToStep = (step) => setCurrentStep(step);\n\n  // Step data for rendering\n  const getCurrentStepData = () => {\n    switch (currentStep) {\n      case 1: return { options: designs, selected: selections.design, onSelect: v => handleSelection('design', v) };\n      case 2: return { options: metals, selected: selections.metal, onSelect: v => handleSelection('metal', v) };\n      case 3: return { options: shapes, selected: selections.shape, onSelect: v => handleSelection('shape', v) };\n      case 4: return { options: carats, selected: selections.carat, onSelect: v => handleSelection('carat', v) };\n      default: return null;\n    }\n  };\n\n  // Progress bar status\n  const getProgressStatus = () =>\n    steps.map((step, idx) => {\n      if (idx < currentStep - 1) {\n        return { step: step.id, label: step.title.replace('Choose ', ''), completed: true, current: false };\n      } else if (idx === currentStep - 1) {\n        return { step: step.id, label: step.title.replace('Choose ', ''), completed: false, current: true };\n      } else {\n        return { step: step.id, label: step.title.replace('Choose ', ''), completed: false, current: false };\n      }\n    });\n\n  // Add to cart handler\n  const handleAddToCart = async () => {\n    if (selections.metal && selections.design && selections.shape && selections.carat) {\n      // Look up the real product in ring_images\n      const { data: productData, error } = await supabase\n        .from('ring_images')\n        .select('*')\n        .eq('design', selections.design)\n        .eq('metal', selections.metal)\n        .eq('diamond_shape', selections.shape)\n        .eq('carat', selections.carat)\n        .single();\n      const designLabel = designs.find(d => d.value === selections.design)?.label || selections.design;\n      const metalLabel = metals.find(m => m.value === selections.metal)?.label || selections.metal;\n      const shapeLabel = shapes.find(s => s.value === selections.shape)?.label || selections.shape;\n      let ringProduct;\n      if (!error && productData) {\n        ringProduct = {\n          id: productData.id,\n          name: `${designLabel} Ring`,\n          design: selections.design,\n          designLabel,\n          metal: selections.metal,\n          metalLabel,\n          shape: selections.shape,\n          shapeLabel,\n          carat: selections.carat,\n          price: totalPrice,\n          qty: 1,\n          image: productData.public_url || productData.image_url || currentImage || '/placeholder-ring.png',\n        };\n      } else {\n        // If the combination does not exist, add a custom ring with the selected carat and a placeholder image\n        ringProduct = {\n          id: `custom-${Date.now()}`,\n          name: `${designLabel} Ring (Custom)` ,\n          design: selections.design,\n          designLabel,\n          metal: selections.metal,\n          metalLabel,\n          shape: selections.shape,\n          shapeLabel,\n          carat: selections.carat,\n          price: totalPrice,\n          qty: 1,\n          image: currentImage || '/placeholder-ring.png',\n          isCustom: true,\n        };\n      }\n      addToCart(ringProduct);\n      setAdded(true);\n      setTimeout(() => setAdded(false), 1000);\n    } else {\n      alert('Please complete all customization steps first');\n    }\n  };\n\n  // Only allow next step if image is valid and selection is made\n  const canAdvance = !imageError && ((currentStep === 1 && selections.design) || (currentStep === 2 && selections.metal) || (currentStep === 3 && selections.shape) || (currentStep === 4 && selections.carat));\n\n  const stepData = getCurrentStepData();\n\n  return (\n    <div className=\"min-h-screen bg-white flex flex-col items-center overflow-x-hidden\">\n      <div className=\"w-full max-w-xl px-2 sm:px-4 flex flex-col items-center\">\n         {/* Header */}\n         <div className=\"text-center mt-2 mb-2\">\n           <div className=\"flex items-center justify-center mb-1\">\n             <Diamond className=\"w-4 h-4 text-yellow-500 mr-1\" />\n             <h1 className=\"text-base font-bold bg-gradient-to-r from-yellow-400 to-yellow-600 bg-clip-text text-transparent\">\n               Shemesh Gold\n             </h1>\n           </div>\n           <p className=\"text-xs text-gray-600\">Start customizing your dream ring</p>\n         </div>\n         {/* Ring Preview */}\n         <div className=\"w-full flex flex-col items-center mb-1 relative\">\n           <div className=\"w-full flex justify-center items-center\">\n             {currentImage && !imageError ? (\n               <img\n                 src={currentImage}\n                 alt=\"Ring preview\"\n                 className=\"object-contain max-h-96 w-auto mx-auto\"\n                 style={{ maxWidth: '100%' }}\n                 onError={() => setImageError(true)}\n               />\n             ) : imageError ? (\n               <div className=\"w-full max-h-96 flex flex-col items-center justify-center bg-red-50 rounded-lg border-2 border-dashed border-red-300 p-8\">\n                 <RingIcon className=\"w-16 h-16 text-red-300 mb-4\" />\n                 <h3 className=\"text-lg font-semibold text-red-600 mb-2\">Sorry, this ring preview is not available</h3>\n                 <p className=\"text-sm text-red-500 text-center\">Please try a different combination to see your dream ring!</p>\n               </div>\n             ) : (\n               <div className=\"w-full max-h-96 flex flex-col items-center justify-center bg-gray-50 rounded-lg border-2 border-dashed border-gray-300 p-8\">\n                 <Diamond className=\"w-16 h-16 text-gray-400 mb-4\" />\n                 <h3 className=\"text-lg font-semibold text-gray-600 mb-2\">Let's make your dream ring</h3>\n                 <p className=\"text-sm text-gray-500 text-center\">Start by choosing your metal type below</p>\n               </div>\n             )}\n           </div>\n           {/* Floating Message */}\n           {showFloatingMessage && (\n             <div className=\"absolute top-0 left-0 right-0 flex justify-center pointer-events-none z-10\">\n               <div className=\"bg-yellow-500 text-black px-3 py-2 rounded-b-lg shadow-lg text-sm font-medium animate-pulse mt-0\">\n                 You have excellent taste in jewelry ✨\n               </div>\n             </div>\n           )}\n           {/* Success Message */}\n           {showSuccessMessage && (\n             <div className=\"absolute top-0 left-0 right-0 flex justify-center pointer-events-none z-10\">\n               <div className=\"bg-green-500 text-white px-4 py-3 rounded-lg shadow-lg text-sm font-medium animate-bounce mt-4\">\n                 <div className=\"flex items-center\">\n                   <Check className=\"w-4 h-4 mr-2\" />\n                   Ring added to cart! Redirecting...\n                 </div>\n               </div>\n             </div>\n           )}\n         </div>\n         {/* Controls */}\n         <div className=\"w-full flex flex-col gap-0.5 items-center\">\n           {/* Progress Bar */}\n           <div className=\"w-full text-[10px]\">\n             <ProgressBar steps={getProgressStatus()} onStepClick={goToStep} tiny />\n           </div>\n           {/* Current Customization Step */}\n           <div className=\"w-full text-[10px] flex items-center gap-1\">\n             {currentStep > 1 && (\n               <button\n                 onClick={() => setCurrentStep(currentStep - 1)}\n                 className=\"flex items-center px-1 py-0.5 text-[10px] bg-gray-100 border border-gray-300 rounded hover:bg-gray-200 transition-all duration-150 mr-1\"\n                 aria-label=\"Previous step\"\n               >\n                 <ChevronLeft className=\"w-3 h-3 mr-0.5\" /> Prev\n               </button>\n             )}\n             <div className=\"flex-1\">\n               {stepData && stepData.options && (\n                 <CustomizationStep\n                   title={null}\n                   description={null}\n                   options={stepData.options}\n                   selected={stepData.selected}\n                   onSelect={stepData.onSelect}\n                 />\n               )}\n             </div>\n           </div>\n           {/* Next Step Button (if not last step) */}\n           {currentStep < 4 && (\n             <button\n               onClick={() => canAdvance && setCurrentStep(currentStep + 1)}\n               disabled={!canAdvance}\n               className={`mt-1 px-3 py-1 rounded bg-yellow-500 text-black text-xs font-semibold shadow ${!canAdvance ? 'opacity-50 cursor-not-allowed' : 'hover:bg-yellow-600'}`}\n             >\n               Next\n             </button>\n           )}\n           {/* Summary and Add to Cart */}\n           <div className=\"w-full text-[10px]\">\n             <div className=\"space-y-0.5\">\n               <div className=\"flex items-center justify-between text-[10px]\">\n                 <div className=\"flex items-center\">\n                   <Heart className=\"w-2.5 h-2.5 mr-1 text-rose-500\" />\n                   <span className=\"text-gray-600\">Design:</span>\n                 </div>\n                 <span className=\"font-medium text-gray-900\">\n                   {selections.design ? designs.find(d => d.value === selections.design)?.label : 'Not selected'}\n                 </span>\n               </div>\n               <div className=\"flex items-center justify-between text-[10px]\">\n                 <div className=\"flex items-center\">\n                   <Crown className=\"w-2.5 h-2.5 mr-1 text-yellow-500\" />\n                   <span className=\"text-gray-600\">Metal:</span>\n                 </div>\n                 <span className=\"font-medium text-gray-900\">\n                   {selections.metal ? metals.find(m => m.value === selections.metal)?.label : 'Not selected'}\n                 </span>\n               </div>\n               <div className=\"flex items-center justify-between text-[10px]\">\n                 <div className=\"flex items-center\">\n                   <Diamond className=\"w-2.5 h-2.5 mr-1 text-blue-500\" />\n                   <span className=\"text-gray-600\">Shape:</span>\n                 </div>\n                 <span className=\"font-medium text-gray-900\">\n                   {selections.shape ? shapes.find(s => s.value === selections.shape)?.label : 'Not selected'}\n                 </span>\n               </div>\n               <div className=\"flex items-center justify-between text-[10px]\">\n                 <div className=\"flex items-center\">\n                   <Star className=\"w-2.5 h-2.5 mr-1 text-yellow-500\" />\n                   <span className=\"text-gray-600\">Carat:</span>\n                 </div>\n                 <span className=\"font-medium text-gray-900\">\n                   {selections.carat ? carats.find(c => c.value === selections.carat)?.label : 'Not selected'}\n                 </span>\n               </div>\n             </div>\n             <div className=\"w-full mt-0.5\">\n               <button\n                 onClick={handleAddToCart}\n                 disabled={!(selections.metal && selections.design && selections.shape && selections.carat)}\n                 className=\"w-full flex items-center justify-center py-0.5 text-[10px] bg-gradient-to-r from-yellow-500 to-yellow-600 text-black rounded-md hover:from-yellow-400 hover:to-yellow-500 disabled:from-gray-300 disabled:to-gray-400 disabled:cursor-not-allowed font-semibold transition-all duration-200 shadow-md hover:shadow-lg min-h-0\"\n               >\n                 <ShoppingCart className=\"w-2.5 h-2.5 mr-1\" />\n                 <span>{added ? 'Added!' : 'Add to Cart'}</span>\n                 <span className=\"ml-1 px-1 py-0.5 bg-black/10 rounded text-[10px] font-bold\">\n                   ${totalPrice.toLocaleString()}\n                 </span>\n               </button>\n               {!(selections.metal && selections.design && selections.shape && selections.carat) && (\n                 <p className=\"text-[10px] text-gray-500 mt-0.5 text-center\">\n                   Complete all steps to add to cart\n                 </p>\n               )}\n               {selections.metal && selections.design && selections.shape && selections.carat && (\n                 <div className=\"text-center mt-1\">\n                   <p className=\"text-[10px] text-yellow-600 font-medium\">\n                     ✨ Perfect choice! Your dream ring is ready ✨\n                   </p>\n                 </div>\n               )}\n             </div>\n           </div>\n         </div>\n      </div>\n    </div>\n  );\n};\n\nexport default RingCustomizer; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}