{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\test\\\\Desktop\\\\FinalRingsStore\\\\client\\\\src\\\\pages\\\\ProductDetail.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { ringOptions, basePrice } from \"../data/ringOptions\";\nimport { useCart } from '../App';\nimport { supabase } from '../lib/supabase';\nimport ProductCard from '../components/ProductCard';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst getDesignLabel = value => {\n  const found = [...(ringOptions && ringOptions.designs || []), {\n    id: 'classic-solitaire',\n    name: 'Classic Solitaire'\n  }, {\n    id: 'halo-setting',\n    name: 'Halo Setting'\n  }, {\n    id: 'vintage-antique',\n    name: 'Vintage/Antique Style'\n  }, {\n    id: 'three-stone',\n    name: 'Three Stone'\n  }].find(d => d.id === value || d.value === value);\n  return found ? found.name : value;\n};\nconst getDescription = value => {\n  const found = [...(ringOptions && ringOptions.designs || []), {\n    id: 'classic-solitaire',\n    description: 'A timeless single stone setting, perfect for any occasion.'\n  }, {\n    id: 'halo-setting',\n    description: 'Diamond surrounded by smaller stones for extra brilliance.'\n  }, {\n    id: 'vintage-antique',\n    description: 'Romantic, art-deco inspired design for a unique look.'\n  }, {\n    id: 'three-stone',\n    description: 'Past, present, and future symbolism in a trinity design.'\n  }].find(d => d.id === value || d.value === value);\n  return found ? found.description : '';\n};\nconst allMetals = [\"white-gold\", \"yellow-gold\", \"rose-gold\", \"platinum\"];\nconst ProductDetail = () => {\n  _s();\n  const {\n    id\n  } = useParams();\n  const {\n    addToCart\n  } = useCart();\n  const [product, setProduct] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    const fetchProduct = async () => {\n      setLoading(true);\n      setError(null);\n      // Fetch the product by id\n      const {\n        data,\n        error\n      } = await supabase.from('ring_images').select('*').eq('id', id).single();\n      if (error || !data) {\n        setError('Product Not Found');\n        setProduct(null);\n        setLoading(false);\n        return;\n      }\n\n      // Find all images for this design/shape (for all metals)\n      const {\n        data: allImages\n      } = await supabase.from('ring_images').select('*').eq('design', data.design).eq('diamond_shape', data.diamond_shape);\n\n      // Build images by metal\n      const images = {};\n      allMetals.forEach(metal => {\n        const found = (allImages || []).find(img => img.metal === metal);\n        if (found) {\n          images[metal] = found.image_url ? supabase.storage.from('ring-images').getPublicUrl(found.image_url).data.publicUrl : '/placeholder-ring.png';\n        }\n      });\n\n      // Get price data from any metal entry for this design/shape (prices are the same across metals)\n      const priceData = allImages && allImages.length > 0 ? allImages[0] : data;\n\n      // Prepare product data for ProductCard\n      setProduct({\n        id: data.id,\n        design: data.design,\n        designLabel: getDesignLabel(data.design),\n        description: getDescription(data.design),\n        metal: data.metal,\n        availableMetals: allMetals.filter(metal => images[metal]),\n        images,\n        price: priceData.price_1_0ct || basePrice,\n        // Default to 1.0ct price\n        priceData: {\n          price_1_0ct: priceData.price_1_0ct,\n          price_1_5ct: priceData.price_1_5ct,\n          price_2_0ct: priceData.price_2_0ct,\n          price_2_5ct: priceData.price_2_5ct\n        }\n      });\n      setLoading(false);\n    };\n    fetchProduct();\n  }, [id]);\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center py-12\",\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 12\n    }, this);\n  }\n  if (error || !product) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white min-h-screen font-sans px-4 py-12 flex items-center justify-center\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-2xl font-bold text-black mb-4\",\n          children: \"Product Not Found\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"/shop\",\n          className: \"text-gold font-bold hover:underline\",\n          children: \"Back to Shop\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-white min-h-screen font-sans px-4 py-12 flex items-center justify-center\",\n    children: /*#__PURE__*/_jsxDEV(ProductCard, {\n      ring: product,\n      onAddToCart: addToCart\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 110,\n    columnNumber: 5\n  }, this);\n};\n_s(ProductDetail, \"si8FVF0Z2nrbjs7OS64OFhRPekg=\", false, function () {\n  return [useParams, useCart];\n});\n_c = ProductDetail;\nexport default ProductDetail;\nvar _c;\n$RefreshReg$(_c, \"ProductDetail\");","map":{"version":3,"names":["React","useEffect","useState","useParams","ringOptions","basePrice","useCart","supabase","ProductCard","jsxDEV","_jsxDEV","getDesignLabel","value","found","designs","id","name","find","d","getDescription","description","allMetals","ProductDetail","_s","addToCart","product","setProduct","loading","setLoading","error","setError","fetchProduct","data","from","select","eq","single","allImages","design","diamond_shape","images","forEach","metal","img","image_url","storage","getPublicUrl","publicUrl","priceData","length","designLabel","availableMetals","filter","price","price_1_0ct","price_1_5ct","price_2_0ct","price_2_5ct","className","children","fileName","_jsxFileName","lineNumber","columnNumber","href","ring","onAddToCart","_c","$RefreshReg$"],"sources":["C:/Users/test/Desktop/FinalRingsStore/client/src/pages/ProductDetail.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { ringOptions, basePrice } from \"../data/ringOptions\";\nimport { useCart } from '../App';\nimport { supabase } from '../lib/supabase';\nimport ProductCard from '../components/ProductCard';\n\nconst getDesignLabel = (value) => {\n  const found = [\n    ...((ringOptions && ringOptions.designs) || []),\n    { id: 'classic-solitaire', name: 'Classic Solitaire' },\n    { id: 'halo-setting', name: 'Halo Setting' },\n    { id: 'vintage-antique', name: 'Vintage/Antique Style' },\n    { id: 'three-stone', name: 'Three Stone' },\n  ].find(d => d.id === value || d.value === value);\n  return found ? found.name : value;\n};\nconst getDescription = (value) => {\n  const found = [\n    ...((ringOptions && ringOptions.designs) || []),\n    { id: 'classic-solitaire', description: 'A timeless single stone setting, perfect for any occasion.' },\n    { id: 'halo-setting', description: 'Diamond surrounded by smaller stones for extra brilliance.' },\n    { id: 'vintage-antique', description: 'Romantic, art-deco inspired design for a unique look.' },\n    { id: 'three-stone', description: 'Past, present, and future symbolism in a trinity design.' },\n  ].find(d => d.id === value || d.value === value);\n  return found ? found.description : '';\n};\nconst allMetals = [\"white-gold\", \"yellow-gold\", \"rose-gold\", \"platinum\"];\n\nconst ProductDetail = () => {\n  const { id } = useParams();\n  const { addToCart } = useCart();\n  const [product, setProduct] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    const fetchProduct = async () => {\n      setLoading(true);\n      setError(null);\n      // Fetch the product by id\n      const { data, error } = await supabase\n        .from('ring_images')\n        .select('*')\n        .eq('id', id)\n        .single();\n      if (error || !data) {\n        setError('Product Not Found');\n        setProduct(null);\n        setLoading(false);\n        return;\n      }\n      \n      // Find all images for this design/shape (for all metals)\n      const { data: allImages } = await supabase\n        .from('ring_images')\n        .select('*')\n        .eq('design', data.design)\n        .eq('diamond_shape', data.diamond_shape);\n      \n      // Build images by metal\n      const images = {};\n      allMetals.forEach(metal => {\n        const found = (allImages || []).find(img => img.metal === metal);\n        if (found) {\n          images[metal] = found.image_url ? supabase.storage.from('ring-images').getPublicUrl(found.image_url).data.publicUrl : '/placeholder-ring.png';\n        }\n      });\n      \n      // Get price data from any metal entry for this design/shape (prices are the same across metals)\n      const priceData = allImages && allImages.length > 0 ? allImages[0] : data;\n      \n      // Prepare product data for ProductCard\n      setProduct({\n        id: data.id,\n        design: data.design,\n        designLabel: getDesignLabel(data.design),\n        description: getDescription(data.design),\n        metal: data.metal,\n        availableMetals: allMetals.filter(metal => images[metal]),\n        images,\n        price: priceData.price_1_0ct || basePrice, // Default to 1.0ct price\n        priceData: {\n          price_1_0ct: priceData.price_1_0ct,\n          price_1_5ct: priceData.price_1_5ct,\n          price_2_0ct: priceData.price_2_0ct,\n          price_2_5ct: priceData.price_2_5ct\n        }\n      });\n      setLoading(false);\n    };\n    fetchProduct();\n  }, [id]);\n\n  if (loading) {\n    return <div className=\"text-center py-12\">Loading...</div>;\n  }\n  if (error || !product) {\n    return (\n      <div className=\"bg-white min-h-screen font-sans px-4 py-12 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <h1 className=\"text-2xl font-bold text-black mb-4\">Product Not Found</h1>\n          <a href=\"/shop\" className=\"text-gold font-bold hover:underline\">Back to Shop</a>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"bg-white min-h-screen font-sans px-4 py-12 flex items-center justify-center\">\n      <ProductCard ring={product} onAddToCart={addToCart} />\n    </div>\n  );\n};\n\nexport default ProductDetail; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}